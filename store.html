<!DOCTYPE html>
<!--

    This page is not indexed anywhere on the website. We chose to remove the
    site due to it being reliant on JavaScript, however we saw no need to
    delete it from the repository, should we want to bring it back or rework it
    at a later point.

-->
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initiaala-scale=1.0">
        <title>RepairLens ãƒ» Store</title>
        <link rel="shortcut icon" href="https://tonystr.github.io/diy_website/favicon.ico" type="image/x-icon">
        <link href="https://fonts.googleapis.com/css2?family=Poppins:ital,wght@0,400;0,700;1,400&display=swap" rel="stylesheet">
        <link href="./styles/global.css" rel="stylesheet">
        <link href="./styles/subpage.css" rel="stylesheet">
        <link href="./styles/store.css" rel="stylesheet">
    </head>
    <body id="home">
        <div class="fixed-header">
            <a href="./">
                <div class="brand">
                    RepairLens <img alt="RepairLens logo" height="37" src="./images/repairlens_logo.svg" />
                </div>
            </a>
            <nav>
                <a href="./problem.html">The Problem</a>
                <a href="./ai_repair.html">The Solution</a>
                <a href="./sources.html">Sources</a>
            </nav>
        </div>
        <header>
            <h1>DIY Store</h1>
            <p>Our collection of products to aid your repairs <br> and home-crafts.</p>
        </header>
        <section id="store">
            <div class="products">
                <div class="product">
                    <img src="./images/products/camera_parts.png" alt="Product - camera parts" width="360" height="360">
                    <div class="content">
                        <div class="info-bar">
                            <h3>Camera Parts</h3>
                            <div class="price">$12</div>
                        </div>
                        <p>
                            A hand-picked assortment of bits and pieces that can be used to repair or build cameras.
                        </p>
                        <div class="action-bar">
                            <a href="#shopping">Add to cart ðŸ›’</a>
                        </div>
                    </div>
                </div>
                <div class="product">
                    <img src="./images/products/phone_parts.jpg" alt="Product - camera parts" width="360" height="360">
                    <div class="content">
                        <div class="info-bar">
                            <h3>Phone Parts</h3>
                            <div class="price">$10</div>
                        </div>
                        <p>
                            Second-hand mobile phone components harvested from old and broken phones.
                        </p>
                        <div class="action-bar">
                            <a href="#shopping">Add to cart ðŸ›’</a>
                        </div>
                    </div>
                </div>
                <div class="product">
                    <img src="./images/products/tools.jpg" alt="Product - camera parts" width="360" height="360">
                    <div class="content">
                        <div class="info-bar">
                            <h3>Tool Pack</h3>
                            <div class="price">$30</div>
                        </div>
                        <p>
                            A collection of stainless steel tools, optimal for working on tires and larger projects.
                        </p>
                        <div class="action-bar">
                            <a href="#shopping">Add to cart ðŸ›’</a>
                        </div>
                    </div>
                </div>
                <div class="product">
                    <img src="./images/products/lens_parts.jpg" alt="Product - camera parts" width="360" height="360">
                    <div class="content">
                        <div class="info-bar">
                            <h3>Lens Parts</h3>
                            <div class="price">$15</div>
                        </div>
                        <p>
                            Lenses and pieces commonly used together with lenses. Nice for repairing glasses.
                        </p>
                        <div class="action-bar">
                            <a href="#shopping">Add to cart ðŸ›’</a>
                        </div>
                    </div>
                </div>
                <div class="product">
                    <img src="./images/ai_glasses.png" alt="Product - AI Glasses" width="360" height="360">
                    <div class="content">
                        <div class="info-bar">
                            <h3>AI Glasses</h3>
                            <div class="price">$40</div>
                        </div>
                        <p>
                            What if you had a tool that could identify electronic parts and look up guides while you focus? Our AI Glasses are not for sale yet, as they are still being developed. <a href="./ai_repair.html">Read more</a>
                        </p>
                        <div class="action-bar"></div>
                    </div>
                </div>
            </div>
        </section>
        <section id="checkout">
            <noscript>
                The store doesn't work without JavaScript. Please enable JavaScript or use a newer browser.
            </noscript>
            <button class="disabled" id="checkout-button">Checkout</button>
            <p class="shopping-message">
                Please select a product in order to checkout.
            </p>
        </section>
        <footer>
            <div>
                Â© Copyright <span class="theme-text">RepairLens</span> 2020
            </div>
            <div class="center">
                <a href="./privacy.html">Privacy & Terms</a>
            </div>
            <details class="attributions">
                <summary>Attributions</summary>
                All images are in public domain, from <a href="https://www.pexels.com/">https://www.pexels.com/</a>.
            </details>
            <details class="about-us">
                <summary>About us</summary>
                This website was developed by
                <a href="https://github.com/s341507">Adrian Bakstad</a>,
                <a href="https://github.com/S341546">Vegard Stigen</a> and
                <a href="https://tonystr.net">Tony StrÃ¸msnÃ¦s</a>.
            </details>
        </footer>
        <script>
            // Send error message for Internet Explorer because it's JavaScript support is outdated
            var ua = window.navigator.userAgent;
            if (ua.indexOf('MSIE ') > 0 || ua.indexOf('Trident/') > 0) {
                document.querySelector('.shopping-message').innerText = 'Internet explorer is too old to handle this website. Please upgrade to a newer browsers in order to use our store';
            }

            const cart = new Set();
            const checkoutButton = document.getElementById('checkout-button');
        </script>
        <script>
            // Script is placed at the bottom of this HTML file because
            //   * it needs to run after the DOM has been initialized
            //   * it's small and only used by this page, so no point in abstracting out to another file

            function printCart(cartSet) {
                const cartArr = Array.from(cart);
                return cartSet.size === 1 ?
                    cartArr[0] :
                    `${cartArr.slice(0, -1).reduce((acc, val) => `${acc}, ${val}`)} and ${cartArr[cart.size - 1]}`;
            }

            for (const elm of Array.from(document.querySelectorAll('a[href="#shopping"]'))) {
                elm.addEventListener('click', ({ target }) => {
                    const product = target.parentNode.parentNode.parentNode.querySelector('.info-bar h3').innerText;

                    if (cart.has(product)) {
                        cart.delete(product);
                        target.innerText = 'Add to cart ðŸ›’';
                    } else {
                        cart.add(product);
                        target.innerText = 'Remove from cart ðŸ›’';
                    }

                    checkoutButton.className = cart.size === 0 ? 'disabled' : 'enabled';

                    document.querySelector('#checkout .shopping-message').innerText = `Click to purchase ${printCart(cart)}`;
                });
            }

            function deleteElemment(elm) {
                elm.parentNode.removeChild(elm);
            }

            checkoutButton.addEventListener('click', ({ target }) => {
                if (cart.size === 0) return;

                deleteElemment(document.querySelector('header'));
                deleteElemment(document.querySelector('#store'));
                document.querySelector('#checkout').innerHTML = `
                    <div class="after-purchase">
                        <h1>Thank you for shopping with us. Let's save the planet together!</h1>
                    </div>
                `;
            });
        </script>
    </body>
</html>
